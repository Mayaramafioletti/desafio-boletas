<p-drawer
  header="Filtros"
  [(visible)]="visible"
  (visibleChange)="visibleChange.emit($event)"
>
  <div class="form">
    <!-- Código da Operação -->
    <div class="flex-gap">
      <input
        type="number"
        pInputText
        placeholder="Cod. Operação"
        [(ngModel)]="codigoOperacao"
        (ngModelChange)="emitirFiltros()"
        class="w-100"
      />
      <p-button
        icon="pi pi-trash"
        size="small"
        [rounded]="true"
        [text]="true"
        severity="danger"
        (click)="limparCampo('codigoOperacao')"
      />
    </div>

    <!-- Cliente -->
    <div class="flex-gap">
      <p-select
        [(ngModel)]="selectedCliente"
        [options]="clientes"
        optionLabel="nome"
        optionValue="id"
        placeholder="Cliente"
        (onChange)="emitirFiltros()"
        class="w-100"
      />
      <p-button
        icon="pi pi-trash"
        size="small"
        [rounded]="true"
        [text]="true"
        severity="danger"
        (click)="limparCampo('selectedCliente')"
      />
    </div>

    <!-- Fundo -->
    <div class="flex-gap">
      <p-select
        [(ngModel)]="selectedFundo"
        [options]="fundos"
        optionLabel="nome"
        optionValue="id"
        placeholder="Fundo"
        (onChange)="emitirFiltros()"
        class="w-100"
      />
      <p-button
        icon="pi pi-trash"
        size="small"
        [rounded]="true"
        [text]="true"
        severity="danger"
        (click)="limparCampo('selectedFundo')"
      />
    </div>

    <!-- Situações -->
    <div class="flex-gap">
      <p-multiSelect
        [(ngModel)]="selectedSituacoes"
        [options]="situacoes"
        optionLabel="nome"
        optionValue="id"
        placeholder="Situações"
        (onChange)="emitirFiltros()"
        class="w-100"
      />
      <p-button
        icon="pi pi-trash"
        size="small"
        [rounded]="true"
        [text]="true"
        severity="danger"
        (click)="limparCampo('selectedSituacoes')"
      />
    </div>

    <!-- Tipo de Operação -->
    <div class="flex-gap">
      <p-multiSelect
        [(ngModel)]="selectedTiposOperacao"
        [options]="tiposOperacao"
        optionLabel="label"
        optionValue="value"
        placeholder="Tipo de Operação"
        (onChange)="emitirFiltros()"
        class="w-100"
      />
      <p-button
        icon="pi pi-trash"
        size="small"
        [rounded]="true"
        [text]="true"
        severity="danger"
        (click)="limparCampo('selectedTiposOperacao')"
      />
    </div>

    <!-- Datas -->
    <div class="flex-gap">
      <p-calendar
        [(ngModel)]="dataInicio"
        placeholder="Data Inicial"
        dateFormat="dd/mm/yy"
        [showIcon]="true"
        (onSelect)="mensagemData = ''; emitirFiltros()"
        class="w-100"
      />
      <p-calendar
        [(ngModel)]="dataFim"
        placeholder="Data Final"
        dateFormat="dd/mm/yy"
        [showIcon]="true"
        (onSelect)="mensagemData = ''; emitirFiltros()"
        class="w-100"
      />
      <p-button
        icon="pi pi-trash"
        size="small"
        [rounded]="true"
        [text]="true"
        severity="danger"
        (click)="limparCampo('dataInicio'); limparCampo('dataFim')"
      />
    </div>
    <p-message severity="error" variant="simple" size="small">
      {{ mensagemData }}
    </p-message>

    <!-- Valores -->
    <div class="flex-gap">
      <input
        type="number"
        pInputText
        [(ngModel)]="valorFinanceiroMin"
        (ngModelChange)="mensagemValor = ''; emitirFiltros()"
        placeholder="Valor mín."
        class="w-100"
      />
      <input
        type="number"
        pInputText
        [(ngModel)]="valorFinanceiroMax"
        (ngModelChange)="mensagemValor = ''; emitirFiltros()"
        placeholder="Valor máx."
        class="w-100"
      />
      <p-button
        icon="pi pi-trash"
        size="small"
        [rounded]="true"
        [text]="true"
        severity="danger"
        (click)="limparCampo('valorFinanceiroMin'); limparCampo('valorFinanceiroMax')"
      />
    </div>
    <p-message severity="error" variant="simple" size="small">
      {{ mensagemValor }}
    </p-message>
  </div>
</p-drawer>
